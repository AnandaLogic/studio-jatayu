<div class="login-container">
  <div class="login-form">
    <h1>LOGIN</h1>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <!-- Email Field -->
      <div class="input-group">
        <div class="input-field" [ngClass]="{'error': loginForm.get('email')?.invalid && loginForm.get('email')?.touched}">
          <div class="icon">
            <svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.09641 6.19421C1.73102 6.52881 10.5462 11.3345 10.8751 11.5076C11.2039 11.6806 11.5385 11.7614 12.0577 11.7614C12.5769 11.7614 12.9116 11.6806 13.2404 11.5076C13.5692 11.3345 22.3844 6.52881 23.019 6.19421C23.2556 6.07305 23.6536 5.85383 23.7402 5.60576C23.8902 5.1673 23.7286 5 23.0883 5H12.0577H1.02718C0.386813 5 0.225277 5.17307 0.375274 5.60576C0.461811 5.8596 0.85988 6.07305 1.09641 6.19421Z" fill="white"/>
              <path d="M23.5207 6.45358C23.0476 6.69588 18.8015 9.71889 15.992 11.5362L20.7342 16.8726C20.8496 16.988 20.9015 17.1264 20.838 17.1957C20.7688 17.2591 20.6188 17.2245 20.4977 17.1149L14.8093 12.315C13.9497 12.8688 13.344 13.2496 13.2401 13.3073C12.7959 13.5323 12.4844 13.5611 12.0574 13.5611C11.6305 13.5611 11.319 13.5323 10.8748 13.3073C10.7652 13.2496 10.1652 12.8688 9.30558 12.315L3.61723 17.1149C3.50185 17.2303 3.34609 17.2649 3.27686 17.1957C3.20763 17.1322 3.25955 16.988 3.37493 16.8726L8.11137 11.5362C5.30181 9.71889 1.00959 6.69588 0.536527 6.45358C0.0288455 6.19397 0 6.49973 0 6.73626C0 6.9728 0 18.5629 0 18.5629C0 19.0995 0.790369 19.7687 1.35574 19.7687H12.0574H22.7592C23.3245 19.7687 23.9995 19.0937 23.9995 18.5629C23.9995 18.5629 23.9995 6.96703 23.9995 6.73626C23.9995 6.49396 24.0341 6.19397 23.5207 6.45358Z" fill="white"/>
            </svg>
          </div>
          <input
            type="email"
            formControlName="email"
            placeholder="Email Address"
            [ngClass]="{'error': loginForm.get('email')?.invalid && loginForm.get('email')?.touched}"
          >
        </div>
        <div class="input-line"></div>
        <div class="error-message" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
          <span *ngIf="loginForm.get('email')?.errors?.['required']">Email is required</span>
          <span *ngIf="loginForm.get('email')?.errors?.['email']">Please enter a valid email</span>
        </div>
      </div>

      <!-- Password Field -->
      <div class="input-group">
        <div class="input-field" [ngClass]="{'error': loginForm.get('password')?.invalid && loginForm.get('password')?.touched}">
          <div class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 11H5C3.89543 11 3 11.8954 3 13V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V13C21 11.8954 20.1046 11 19 11Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="Password"
            [ngClass]="{'error': loginForm.get('password')?.invalid && loginForm.get('password')?.touched}"
          >
          <div class="password-toggle" (click)="togglePassword()">
            <svg *ngIf="!showPassword" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <svg *ngIf="showPassword" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.94 17.94C16.2307 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.6819 3.96914 7.65661 6.06 6.06L17.94 17.94Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.9 4.24C10.5883 4.0789 11.2931 3.99836 12 4C19 4 23 12 23 12C22.393 13.1356 21.6691 14.2047 20.84 15.19L9.9 4.24Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 1L23 23" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        <div class="input-line"></div>
        <div class="error-message" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
          <span *ngIf="loginForm.get('password')?.errors?.['required']">Password is required</span>
          <span *ngIf="loginForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters</span>
        </div>
      </div>

      <!-- Remember Me & Forgot Password -->
      <div class="form-options">
        <div class="remember-me">
          <input type="checkbox" id="rememberMe" formControlName="rememberMe">
          <label for="rememberMe">Remember me</label>
        </div>
        <a routerLink="/forgot-password" class="forgot-password">Forgot Password?</a>
      </div>

      <!-- Error Message -->
      <div class="error-container" *ngIf="error">
        <p class="error-message">{{ error }}</p>
      </div>

      <!-- Login Button -->
      <button type="submit" class="login-button" [disabled]="loginForm.invalid || loading">
        <span *ngIf="!loading">Login</span>
        <span *ngIf="loading" class="loading-spinner"></span>
      </button>
    </form>

    <!-- Divider -->
    <div class="divider">
      <span>OR</span>
    </div>

    <!-- Google Login Button -->
    <button class="google-button" (click)="loginWithGoogle()" [disabled]="loading">
      <img src="assets/icons/google.svg" alt="Google" class="google-icon">
      <span>Login with Google</span>
    </button>

    <!-- Register Link -->
    <div class="register-link">
      <p>Don't have an account? <a routerLink="/register">Register</a></p>
    </div>
  </div>
</div>
